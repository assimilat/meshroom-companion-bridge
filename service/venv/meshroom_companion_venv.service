[Unit]
Description=Arocna3 Meshroom Bridge Server
After=network.target
Documentation=https://github.com/assimilat/MeshroomAssistant

[Service]
User=meshroom
Group=meshroom
Type=simple

# Path to the environment variables file
EnvironmentFile=/var/lib/meshroom_companion.conf

# Change to the directory where meshroom_companion.py is located
WorkingDirectory=/var/lib/meshroom_companion

# Start the server using the venv python binary and arguments from the env file
# Systemd will expand these variables at runtime
ExecStart=/var/lib/meshroom_companion/start_companion_venv.sh

# Resilience settings
Restart=always
RestartSec=5

# Logging configuration
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
